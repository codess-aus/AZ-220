Set Up the IoT Solution Infrastructure (10-15%)

Azure IOT Hub on the Sl Standard tier: 
* This tier supports bi-directional (device-to-cloud and cloud-to-device) messaging
* The only pricing tier of Azure IOT Hub that supports the use of Azure Security Center for IOT

Azure IOT Hub on the Free tier: 
* This tier is mainly used for evaluation and testing 
* supports bi-directional messaging with IOT devices 
* Cannot be used with Azure Security Center for IOT

Azure IOT Hub on the B2 Basic tier: 
* This tier supports uni-directional (device-to-cloud) messaging only 
* It cannot be used with Azure Security Center for IOT

Azure Event Hub:
* Azure Event Hub supports device-to-cloud messaging
* You should use Azure IOT Hub for communication and management of IOT devices because of its additional security, monitoring, and provisioning capabilities
* Event Hub does not support cloud-to-device messaging 
* Cannot be used with Azure Security Center for IOT

In the following example:
az group create -l westus -n RGOI 
az iot hub create -n Hub01 -g RGOI --sku Sl 

The -l parameter (a short form for the --location parameter) specifies the target Azure region, and westus is the value for West US. 
The -n parameter is a short form for the --name parameter in the az group create Azure CLI command. 
The -g parameter is a short form for --the resource-group parameter in the az iot hub create Azure CLI command. 
Example Sl as the value for the -sku parameter. This specifies one of the Standard pricing tiers for the new Azure IOT Hub. 

Azure IOT Hub offers two subscription tiers, Basic (B) and Standard (S). 
Each tier offers different features. 
Each tier is further divided into three sizes, 1 through 3. 
The size determines the number of messages the hub can handle on a daily basis. 
You can purchase multiple units of the same size to scale up the daily message limit. 
S3 Standard supports up to 300,000,000 messages per day, per unit. 
Tier Sl Standard, 400,000 messages per day. 
Tier S2 standard, 6,000,000 messages per day. 

The az iot hub create command has two required parameters: name, and resource-group. 

The following command would create an IOT hub named ExampleHub in the ExampleRG resource group: 
az iot hub create --resource-group ExampleRG --name ExampleHub

--sku parameter. This optional parameter allows you to specify the pricing tier for the Azure IOT Hub. The default value is tier Sl. 
--retention-day parameter. This optional parameter allows you to specify how long a hub will store device-to-cloud events. The default value is one day. 
--only-show-errors parameter. This optional parameter allows you to suppress warnings and only show errors. The default is to show both warnings and errors. 

Desired properties of the JSON document. 
* A device app can read the desired properties. 
* The desired properties are set by the back end-solution. 
* An example of a desired property is the telemetry send frequency. 
* The device app can read the desired properties and adjust how often it sends messages
* The device app can also receive notifications of changes to the desired properties

Reported properties of the JSON document. 
* A device app can write to the reported properties. 
The device app can set the reported properties and the back-end solution can read and query reported properties. 

Tags: 
* A device app does not have access to the tags in the device twin JSON document. 
* Tags are used by the back-end solution not the device app. 

* modulesContent: 
* The modulesContent section is in the deployment manifest for IOT Edge
* It is used by the IOT Edge runtime to configure the modules on the device. 

You should obtain a self-signed certificate and create an Azure IOT Hub device using the X.509 Self-Signed authentication type. 
Azure IOT Hub presents three authentication types when you are creating a new device: 
symmetric key, 
X.509 self-signed, 
and X.509 CA signed. 

X.509 is a standard for defining and creating certificates in PKI. 
An X.509 certificate can be self-generated or generated by a public CA. 
A self-signed certificate is generated by the certificate holder or a related entity, and its authenticity and validity has not been independently verified. Self-signed certificates are easy and usually free to create. In 
this scenario, you can use your organization's internal Windows 2016 CA to generate self-signed certificates. 

You should not generate a CSR. A CSR is submitted to a CA when you request an X.509 certificate. 
You should not create an Azure IOT Hub device using the X.509 CA Signed authentication type. You can use this method when the X.509 certificate has been created and validated by a public CA. 
You should not obtain a certificate from a public certification authority. A public certification authority is a trusted entity that uses its own methods for validating a certificate requestor before issuing the certificate. 

You should use **IOT Hub Device SDKs** to build an app to run on an IOT device and send the movement sensor telemetry to Azure IOT Hub. These SDKs are available for .Net, C, Java, Node.js, Python, and iOS. 
They can help you build edge solutions for sending telemetry to or receiving messages from Azure IOT Hub. 

You should use **IOT Hub Service SDKs** to build a backend application to send desired property updates to the remote IOT devices. 
These SDKs are available for .Net, C, Java, Node.js, Python, and iOS. They can help 
you build the backend to manage Azure IOT hubs, schedule required jobs, invoke direct methods, or send desired property updates to remote IOT devices or modules. 

You should use **Provisioning Device SDKs** to build an app to run on an IOT device for communication with the Device Provisioning Service (DPS). These SDKs are available for C, C#, Java, Node.js, and Python. They can be used as an example during initial boot-up to enroll your device with Azure IOT Hub DPS. 

You should use **Provisioning Service SDKs** to build a backend application to manage enrollments in the DPS. These SDKs are available for C, C#, Java, Node.js, and Python. 

Microsoft Graph SDKs: These SDKs can be used to programmatically access data in Office 365, Windows 10, and Enterprise Mobility + Security via Microsoft Graph API. 

You should choose device-to-cloud messages to send telemetry data from a permanently connected device to the IOT hub. IOT Hub has a built-in service endpoint that can be used by the device app to send telemetry messages from your devices. Messages are limited to 256 KB. 

You should choose file upload to send telemetry data batches for an intermittently connected device to the IOT hub. The size of the file is limited only by Azure storage limits. 

You should choose device twin to change the telemetry send frequency on the device for a long-running command. Device twin desired properties are changed on the IOT hub. The device app receives a notification, and can read the new property, and react accordingly. 

Direct method is used to send commands to the device that requires immediate action. 

